(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{9280:(e,n,t)=>{Promise.resolve().then(t.bind(t,52664))},25731:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,AuthProvider:()=>i});var r=t(95155),s=t(12115),a=t(64983);let l=(0,s.createContext)(void 0),i=e=>{let{children:n}=e,[t,i]=(0,s.useState)(null),[c,o]=(0,s.useState)(null);return(0,s.useEffect)(()=>{a.N.auth.getSession().then(e=>{var n;let{data:{session:t}}=e;i(t),o(null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null)});let{data:{subscription:e}}=a.N.auth.onAuthStateChange((e,n)=>{var t;i(n),o(null!==(t=null==n?void 0:n.user)&&void 0!==t?t:null)});return()=>e.unsubscribe()},[]),(0,r.jsx)(l.Provider,{value:{session:t,user:c},children:n})},c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},34964:(e,n,t)=>{"use strict";t.d(n,{Xi:()=>c,j7:()=>i,tU:()=>l});var r=t(95155);t(12115);var s=t(84814),a=t(53999);function l(e){let{className:n,...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"tabs",className:(0,a.cn)("flex flex-col gap-2",n),...t})}function i(e){let{className:n,...t}=e;return(0,r.jsx)(s.B8,{"data-slot":"tabs-list",className:(0,a.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",n),...t})}function c(e){let{className:n,...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"tabs-trigger",className:(0,a.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...t})}},52664:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>v});var r=t(95155),s=t(12115),a=t(64983),l=t(25731),i=t(88524),c=t(34964),o=t(92289),d=t(66474),u=t(53999);function x(e){let{...n}=e;return(0,r.jsx)(o.bL,{"data-slot":"accordion",...n})}function h(e){let{className:n,...t}=e;return(0,r.jsx)(o.q7,{"data-slot":"accordion-item",className:(0,u.cn)("border-b last:border-b-0",n),...t})}function m(e){let{className:n,children:t,...s}=e;return(0,r.jsx)(o.Y9,{className:"flex",children:(0,r.jsxs)(o.l9,{"data-slot":"accordion-trigger",className:(0,u.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",n),...s,children:[t,(0,r.jsx)(d.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function j(e){let{className:n,children:t,...s}=e;return(0,r.jsx)(o.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...s,children:(0,r.jsx)("div",{className:(0,u.cn)("pt-0 pb-4",n),children:t})})}function v(){let{user:e}=(0,l.A)(),[n,t]=(0,s.useState)([]),[o,d]=(0,s.useState)(null),[u,v]=(0,s.useState)("asc"),[b,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[A,N]=(0,s.useState)("All");(0,s.useEffect)(()=>{e&&(async()=>{let{data:n,error:r}=await a.N.from("Sweden_transactions_agregated_2025").select('\n              id,\n              created_at,\n              "Date",\n              "Description",\n              "Amount",\n              "Balance",\n              "Category",\n              "Responsable",\n              "Bank",\n              "Comment",\n              user_id,\n              source_table\n            ').eq("user_id",e.id);r?console.error("Error fetching transactions:",r):t(n)})()},[e]);let y=e=>{o===e?v("asc"===u?"desc":"asc"):(d(e),v("asc"))},C=n.filter(e=>"American Express"===e.Bank).filter(e=>{var n;let t=b.toLowerCase();return null===(n=e.Category)||void 0===n?void 0:n.toLowerCase().includes(t)}).filter(e=>{var n;let t=f.toLowerCase();return null===(n=e.Description)||void 0===n?void 0:n.toLowerCase().includes(t)}).filter(e=>"All"===A||!!e.Date&&new Date(e.Date).getMonth()===["Jan","Fev","Mar","Apr","Mai","Jun","Jul","Ago","Sep","Oct","Nov","Dez"].indexOf(A)).filter(e=>"Invoice"!==e.Category),w=n.filter(e=>"American Express"===e.Bank).filter(e=>"Invoice"===e.Category),k=C.reduce((e,n)=>e+(n.Amount||0),0),S=w.reduce((e,n)=>e+(n.Amount||0),0),I=[...C].sort((e,n)=>{var t,r;if(!o)return 0;let s=null!==(t=e[o])&&void 0!==t?t:"",a=null!==(r=n[o])&&void 0!==r?r:"";return"string"==typeof s&&"string"==typeof a?"asc"===u?s.localeCompare(a):a.localeCompare(s):"number"==typeof s&&"number"==typeof a?"asc"===u?s-a:a-s:0});return e?(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"American Express Transactions"}),(0,r.jsxs)(x,{type:"single",collapsible:!0,children:[(0,r.jsxs)(h,{value:"main-table",children:[(0,r.jsx)(m,{children:"Main Transactions"}),(0,r.jsxs)(j,{children:[(0,r.jsxs)("div",{className:"mb-4 text-right font-bold",children:["Total Amount: ",new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(k)]}),(0,r.jsx)(c.tU,{defaultValue:"All",onValueChange:e=>N(e),className:"mb-4",children:(0,r.jsxs)(c.j7,{children:[(0,r.jsx)(c.Xi,{value:"All",children:"All"}),(0,r.jsx)(c.Xi,{value:"Jan",children:"Jan"}),(0,r.jsx)(c.Xi,{value:"Fev",children:"Fev"}),(0,r.jsx)(c.Xi,{value:"Mar",children:"Mar"}),(0,r.jsx)(c.Xi,{value:"Apr",children:"Apr"}),(0,r.jsx)(c.Xi,{value:"Mai",children:"Mai"}),(0,r.jsx)(c.Xi,{value:"Jun",children:"Jun"}),(0,r.jsx)(c.Xi,{value:"Jul",children:"Jul"}),(0,r.jsx)(c.Xi,{value:"Ago",children:"Ago"}),(0,r.jsx)(c.Xi,{value:"Sep",children:"Sep"}),(0,r.jsx)(c.Xi,{value:"Oct",children:"Oct"}),(0,r.jsx)(c.Xi,{value:"Nov",children:"Nov"}),(0,r.jsx)(c.Xi,{value:"Dez",children:"Dez"})]})}),(0,r.jsxs)("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Filter by Category",value:b,onChange:e=>p(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md"}),(0,r.jsx)("input",{type:"text",placeholder:"Filter by Description",value:f,onChange:e=>g(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,r.jsxs)(i.XI,{children:[(0,r.jsx)(i.A0,{children:(0,r.jsxs)(i.Hj,{children:[(0,r.jsxs)(i.nd,{onClick:()=>y("id"),children:["ID ","id"===o&&("asc"===u?"↑":"↓")]}),(0,r.jsxs)(i.nd,{onClick:()=>y("Date"),children:["Date ","Date"===o&&("asc"===u?"↑":"↓")]}),(0,r.jsxs)(i.nd,{onClick:()=>y("Description"),children:["Description ","Description"===o&&("asc"===u?"↑":"↓")]}),(0,r.jsxs)(i.nd,{onClick:()=>y("Amount"),children:["Amount ","Amount"===o&&("asc"===u?"↑":"↓")]}),(0,r.jsxs)(i.nd,{onClick:()=>y("Balance"),children:["Balance ","Balance"===o&&("asc"===u?"↑":"↓")]}),(0,r.jsxs)(i.nd,{onClick:()=>y("Category"),children:["Category ","Category"===o&&("asc"===u?"↑":"↓")]}),(0,r.jsxs)(i.nd,{onClick:()=>y("Responsable"),children:["Responsable ","Responsable"===o&&("asc"===u?"↑":"↓")]}),(0,r.jsxs)(i.nd,{onClick:()=>y("Bank"),children:["Bank ","Bank"===o&&("asc"===u?"↑":"↓")]}),(0,r.jsxs)(i.nd,{onClick:()=>y("Comment"),children:["Comment ","Comment"===o&&("asc"===u?"↑":"↓")]})]})}),(0,r.jsx)(i.BF,{children:I.map(e=>(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nA,{children:e.id}),(0,r.jsx)(i.nA,{children:e.Date?new Date(e.Date).toLocaleDateString():"N/A"}),(0,r.jsx)(i.nA,{children:e.Description||"N/A"}),(0,r.jsx)(i.nA,{children:null!==e.Amount?new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(e.Amount):"N/A"}),(0,r.jsx)(i.nA,{children:null!==e.Balance?new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(e.Balance):"N/A"}),(0,r.jsx)(i.nA,{children:e.Category||"N/A"}),(0,r.jsx)(i.nA,{children:e.Responsable||"N/A"}),(0,r.jsx)(i.nA,{children:e.Bank||"N/A"}),(0,r.jsx)(i.nA,{children:e.Comment||"N/A"})]},e.id))})]}),(0,r.jsxs)("div",{className:"mt-4 text-right font-bold",children:["Total Amount: ",new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(k)]})]})]}),(0,r.jsxs)(h,{value:"invoice-table",children:[(0,r.jsx)(m,{children:"Invoice Transactions"}),(0,r.jsxs)(j,{children:[(0,r.jsxs)(i.XI,{children:[(0,r.jsx)(i.A0,{children:(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nd,{children:"ID"}),(0,r.jsx)(i.nd,{children:"Date"}),(0,r.jsx)(i.nd,{children:"Description"}),(0,r.jsx)(i.nd,{children:"Amount"}),(0,r.jsx)(i.nd,{children:"Balance"}),(0,r.jsx)(i.nd,{children:"Category"}),(0,r.jsx)(i.nd,{children:"Responsable"}),(0,r.jsx)(i.nd,{children:"Bank"}),(0,r.jsx)(i.nd,{children:"Comment"})]})}),(0,r.jsx)(i.BF,{children:w.map(e=>(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nA,{children:e.id}),(0,r.jsx)(i.nA,{children:e.Date?new Date(e.Date).toLocaleDateString():"N/A"}),(0,r.jsx)(i.nA,{children:e.Description||"N/A"}),(0,r.jsx)(i.nA,{children:null!==e.Amount?new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(e.Amount):"N/A"}),(0,r.jsx)(i.nA,{children:null!==e.Balance?new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(e.Balance):"N/A"}),(0,r.jsx)(i.nA,{children:e.Category||"N/A"}),(0,r.jsx)(i.nA,{children:e.Responsable||"N/A"}),(0,r.jsx)(i.nA,{children:e.Bank||"N/A"}),(0,r.jsx)(i.nA,{children:e.Comment||"N/A"})]},e.id))})]}),(0,r.jsxs)("div",{className:"mt-4 text-right font-bold",children:["Total Invoice Amount: ",new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(S)]})]})]})]})]}):(0,r.jsx)("div",{className:"text-center mt-10",children:"Please log in to view your transactions."})}},53999:(e,n,t)=>{"use strict";t.d(n,{cn:()=>a});var r=t(52596),s=t(39688);function a(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,s.QP)((0,r.$)(n))}},64983:(e,n,t)=>{"use strict";t.d(n,{N:()=>r});let r=(0,t(10851).UU)("https://hwrbwttovihldczdhrbu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh3cmJ3dHRvdmlobGRjemRocmJ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NTU0NTksImV4cCI6MjA1NTEzMTQ1OX0.7jeVBmstA9tgCoFYlOsYBgCaW4hFmlelZGNOLZ8RCBw")},88524:(e,n,t)=>{"use strict";t.d(n,{A0:()=>l,BF:()=>i,Hj:()=>c,XI:()=>a,nA:()=>d,nd:()=>o});var r=t(95155);t(12115);var s=t(53999);function a(e){let{className:n,...t}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",n),...t})})}function l(e){let{className:n,...t}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",n),...t})}function i(e){let{className:n,...t}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",n),...t})}function c(e){let{className:n,...t}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),...t})}function o(e){let{className:n,...t}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...t})}function d(e){let{className:n,...t}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...t})}}},e=>{var n=n=>e(e.s=n);e.O(0,[567,814,272,441,684,358],()=>n(9280)),_N_E=e.O()}]);